<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
        integrity="sha512-WmokTvQ4MNAYTBgyOUPFrS8cPGoCjZpaqFjZmzbs89BBrO2CXzjNoDvi3dKkScgc9YOAV1O4uZgBm9sg0dNmyA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <style>
        section {
            color: aliceblue;
        }
    </style>
    <header>
        <!-- Jumbotron -->
        <div class="p-3 text-center bg-white border-bottom">
            <div class="container">
                <div class="row gy-3">
                    <!-- Left elements -->
                    <div class="col-lg-2 col-sm-4 col-4">
                        <a href="/" target="_blank" class="float-start">
                            <img src="/image/Gold Luxury Initial Circle Logo (1).png" height="35" />
                        </a>
                    </div>
                    <!-- Left elements -->

                    <!-- Center elements -->
                    <div class="order-lg-last col-lg-5 col-sm-8 col-8">
                        <div class="d-flex float-end">

                            <a href="https://github.com/mdbootstrap/bootstrap-material-design"
                                class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center"
                                target="_blank">
                                <i class="fas fa-heart m-1 me-md-2"></i>
                                <p class="d-none d-md-block mb-0">Wishlist</p>
                            </a>

                        </div>
                    </div>
                    <!-- Center elements -->

                    <!-- Right elements -->
                    <div class="col-lg-5 col-md-12 col-12">
                        <div class="input-group float-center">
                        </div>
                    </div>
                    <!-- Right elements -->
                </div>
            </div>
        </div>
        <!-- Jumbotron -->

        <!-- Heading -->
        <div class="bg-primary">
            <div class="container py-4">
                <!-- Breadcrumb -->
                <nav class="d-flex">
                    <h6 class="mb-0">
                        <a href="/" style="text-decoration:none" class="text-white-50">Home</a>
                        <span class="text-white-50 mx-2"> > </span>
                        <a href="/cart" style="text-decoration:none" class="text-white-50">2. Shopping cart</a>
                        <span class="text-white-50 mx-2"> > </span>
                        <a href="/shippinginfo" style="text-decoration:none" class="text-white">3. Address info</a>
                        <span class="text-white-50 mx-2"> > </span>
                        <a href="" style="text-decoration:none" class="text-white-50">4. Payment</a>
                    </h6>
                </nav>
                <!-- Breadcrumb -->
            </div>
        </div>
        <!-- Heading -->
    </header>

    <section class="bg-light text-light py-5">
        <div class="container">
            <div class="row">
                <div class="col-xl-8 col-lg-8 mb-4">

                    <!-- Checkout -->
                    <div class="card shadow-0 border">
                        <div class="p-4">
                            <div class="row">

                            </div>

                            <hr class="my-4" />

                            <h5 class="card-title mb-3">Address Info</h5>

                            {{!-- <div class="row mb-3">
                                <div class="col-lg-4 mb-3">
                                    <!-- Default checked radio -->
                                    <div class="form-check h-100 border rounded-3">
                                        <div class="p-3">
                                            <input class="form-check-input" type="radio" name="flexRadioDefault"
                                                id="flexRadioDefault1" checked />
                                            <label class="form-check-label" for="flexRadioDefault1">
                                                Express delivery <br />
                                                <small class="text-muted">3-4 days via Fedex </small>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 mb-3">
                                    <!-- Default radio -->
                                    <div class="form-check h-100 border rounded-3">
                                        <div class="p-3">
                                            <input class="form-check-input" type="radio" name="flexRadioDefault"
                                                id="flexRadioDefault2" />
                                            <label class="form-check-label" for="flexRadioDefault2">
                                                Post office <br />
                                                <small class="text-muted">20-30 days via post </small>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 mb-3">
                                    <!-- Default radio -->
                                    <div class="form-check h-100 border rounded-3">
                                        <div class="p-3">
                                            <input class="form-check-input" type="radio" name="flexRadioDefault"
                                                id="flexRadioDefault3" />
                                            <label class="form-check-label" for="flexRadioDefault3">
                                                Self pick-up <br />
                                                <small class="text-muted">Come to our shop </small>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div> --}}
                            <div class="card-header">
                                Address
                            </div>
                            {{#each address}}
                            <div class="card">

                                <div class="card-body">
                                    <h5 class="card-title">{{this.name}}</h5>
                                    <h5 class="card-title">{{this.address}}</h5>
                                    <p class="card-text">{{this.country}}</p>
                                    <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle" type="button"
                                            data-bs-toggle="dropdown" aria-expanded="false">
                                            <a href="/shippinginfo?edit_id={{this._id}}"
                                                class="text-light text-decoration-none bg-secondary">Update</a>
                                        </button>
                                        <a href="/payment/{{this._id}}/{{../product._id}}"
                                            class="text-light text-decoration-none bg-primary p-2">Deliver Here</a>
                                        <ul class="dropdown-menu dropdown-menu-start" style="width:100%">
                                            <li>
                                                <form id="addressForm" action="/shippinginfo" method="post" class="p-5">
                                                    <div class="mb-3">
                                                        <input type="hidden" id="id" name="id" value="{{ this._id }}">
                                                        <label for="fullName" class="form-label">Full Name:</label>
                                                        <input type="text" id="fullName" name="name"
                                                            value="{{this.name}}" class="form-control" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="addressLine1" class="form-label">Address Line
                                                            1:</label>
                                                        <input type="text" id="addressLine1" name="addressLine1"
                                                            class="form-control" value="{{this.address}}" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="city" class="form-label">City:</label>
                                                        <input type="text" id="city" name="city" class="form-control"
                                                            value="{{this.city}}" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="state" class="form-label">State:</label>
                                                        <input type="text" id="state" value="{{this.state}}"
                                                            name="state" class="form-control" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="postalCode" class="form-label">Zip Code:</label>
                                                        <input type="text" id="postalCode" value="{{this.zip}}"
                                                            name="postalCode" class="form-control" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="country" class="form-label">Country:</label>
                                                        <input type="text" id="country" name="country"
                                                            value="{{this.country}}" class="form-control" required>
                                                    </div>
                                                    <input type="submit" value="Submit" class="btn btn-primary">
                                                </form>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            {{/each}}

                            <form action="shippinginfo" method="post">
                                <div class="row">
                                    <div class="col-sm-8 mb-3">
                                        <p class="mb-0">Address</p>
                                        <div class="form-outline">
                                            <input type="text" name="address" id="typeText" value="{{formData.address}}"
                                                class="form-control" />
                                        </div>
                                    </div>

                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">City</p>
                                        <div class="form-outline">
                                            <input type="text" name="city" value="{{formData.city}}"
                                                class="form-control" />
                                        </div>
                                    </div>


                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">District</p>
                                        <div class="form-outline">
                                            <input type="text" name="district" value="{{formData.district}}"
                                                class="form-control" />
                                        </div>
                                    </div>

                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">State</p>
                                        <div class="form-outline">
                                            <input type="text" name="state" value="{{formData.state}}"
                                                class="form-control" />
                                        </div>
                                    </div>

                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">Country</p>
                                        <div class="form-outline">
                                            <input type="text" name="country" value="{{formData.country}}"
                                                class="form-control" />
                                        </div>
                                    </div>

                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">House No.</p>
                                        <div class="form-outline">
                                            <input type="text" name="houseno" value="{{formData.houseno}}"
                                                class="form-control" />
                                        </div>
                                    </div>

                                    <div class="col-sm-4 col-6 mb-3">
                                        <p class="mb-0">Zip</p>
                                        <div class="form-outline">
                                            <input type="text" name="zip" value="{{formData.zip}}"
                                                class="form-control" />
                                        </div>
                                    </div>
                                </div>

                                <div class="form-check mb-3">
                                    <input type="submit" class="btn btn-primary" value="Submit and Deliver">

                                </div>
                            </form>

                            {{!-- <div class="mb-3">
                                <p class="mb-0">Message to seller</p>
                                <div class="form-outline">
                                    <textarea class="form-control" id="textAreaExample1" rows="2"></textarea>
                                </div>
                            </div> --}}

                            {{!-- <div class="float-end">
                                <button class="btn btn-light border">Cancel</button>
                                {{#each address}}
                                <button class="btn btn-success shadow-0 border"><a
                                        href="/payment/{{this._id}}">Continue</a></button>
                                {{/each}}
                            </div> --}}
                        </div>
                    </div>
                    <!-- Checkout -->
                </div>


                {{!-- <div class="col-xl-4 col-lg-4 d-flex text-dark justify-content-center justify-content-lg-end">
                    <div class="ms-lg-4 mt-4 mt-lg-0" style="max-width: 320px;">
                        <h6 class="mb-3">Summary</h6>
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Price</p>
                            <p class="mb-2">{{totalPrice}}</p>
                        </div>
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Discount:</p>
                            <p class="mb-2 text-danger">00.0</p>
                        </div>
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Shipping cost:</p>
                            <p class="mb-2">Rs.00.00</p>
                        </div>
                        <hr />
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Total price:</p>
                            <p class="mb-2 fw-bold">{{totalPrice}}</p>
                        </div>

                        <div class="input-group mt-3 mb-4">
                            <input type="text" class="form-control border" name="" placeholder="Promo code" />
                            <button class="btn btn-light text-primary border">Apply</button>
                        </div>

                        <hr />
                        <h6 class="text-dark my-4">Items in cart</h6>
                        {{#each products}}

                        <div class="d-flex align-items-center mb-4">
                            <div class="me-3 position-relative">

                                <img src="uploads/{{this.image.filepath}}" style="height: 96px; width: 96x;"
                                    class="img-sm rounded border" />
                            </div>
                            <div class="">
                                <a href="#" class="nav-link">{{productname}}</a>
                                {{!-- <div class="price text-muted">{{saleprice}}</div>
                            </div>
                        </div>
                        {{/each}}
                    </div>
                </div> --}}


                <div class="col-xl-4 col-lg-4 d-flex justify-content-center justify-content-lg-end">
                    <div class="ms-lg-4 mt-4 mt-lg-0" style="max-width: 320px; color: rgb(0, 0, 0);">
                        <h6 class="mb-3">Summary</h6>
                      
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Price:</p>
                            <p class="mb-2">{{this.totalPrice}}</p>
                        </div>


                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Discount:</p>
                            <p class="mb-2 text-danger">{{this.couponprice}}</p>
                        </div>

                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Shipping cost:</p>
                            <p class="mb-2">Rs.00.00</p>
                        </div>

                        <hr />
                        {{#if this.coupon}}
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Applied price:</p>
                            <p class="mb-2 fw-bold">₹{{lastprice}}</p>
                        </div>
                        <div class="container d-flex p-4">
                            <div class="bar">
                                <p>{{this.coupon.description}}</p>
                            </div>
                            <div class="barbutton mx-auto align-self-center">
                                <a href="/shippinginfo?delete_id={{this._id}}"
                                    class="btn btn-light border text-danger icon-hover-danger">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </div>
                        {{else}}
                        <div class="d-flex justify-content-between">
                            <p class="mb-2">Total price:</p>
                            <p class="mb-2 fw-bold">₹{{totalPrice}}</p>
                        </div>

                        {{/if}}
                        


                        {{!-- {{#each products}}
                        {{#if this.coupon}}
                        <div class="container d-flex p-4">
                            <div class="bar">
                                <p>{{this.coupon.description}}</p>
                            </div>
                            <div class="barbutton mx-auto align-self-center">
                                <a href="/shippinginfo?delete_id={{this._id}}"
                                    class="btn btn-light border text-danger icon-hover-danger">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </div>
                        {{/if}}
                        {{/each}} --}}



                    
                        <div class="input-group mt-3 mb-4">
                            <label class="input-group-text">Coupon</label>
                            <input type="text" class="form-control" name="couponCode"
                                placeholder="{{this.coupon.details}}">
                            {{#if this.coupon}}
                            <button class="btn btn-light" disabled>
                                <a href="/coupon/{{userSession}}" class="text-decoration-none">Apply</a>
                            </button>
                            {{else}}
                            <button class="btn btn-light">
                                <a href="/coupon/{{userSession}}" class="text-decoration-none">Apply</a>
                            </button>
                            {{/if}}
                        </div>
                      

                        <hr />

                        <h6 class="text-dark my-4">Items in cart</h6>

                       
                        <div class="d-flex align-items-center mb-4">
                            <div class="me-3 position-relative">
                                <img src="/{{product.image.filepath}}" style="height: 96px; width: 96px;"
                                    class="img-sm rounded border" />
                            </div>
                            <div class="">
                                <a href="#" class="nav-link">{{product.productname}}</a>
                            </div>
                        </div>
                     
                        <div class="">
                            <a href="#" class="nav-link">{{productname}}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"
        integrity="sha384-QCk8mLEHqCJX6sJekl29qfk9Z1yR+ADgwrWnZM4gFTVy9Nxuz7HdiyQbT+aGQKHi"
        crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
        integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</body>

</html>